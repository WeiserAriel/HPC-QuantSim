<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HPC-X Components & Relationships - Interactive Guide</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: #ffffff;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .components-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .component-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .component-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            background: rgba(255, 255, 255, 0.15);
        }

        .component-card.active {
            background: rgba(74, 144, 226, 0.3);
            border-color: #4a90e2;
            box-shadow: 0 0 20px rgba(74, 144, 226, 0.5);
        }

        .component-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .component-icon {
            width: 40px;
            height: 40px;
            margin-right: 15px;
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
        }

        .component-title {
            font-size: 1.4em;
            font-weight: bold;
        }

        .status-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .status-complete {
            background: #27ae60;
            color: white;
        }

        .status-partial {
            background: #f39c12;
            color: white;
        }

        .component-description {
            margin-bottom: 15px;
            line-height: 1.6;
            opacity: 0.9;
        }

        .component-details {
            display: none;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }

        .component-details.show {
            display: block;
        }

        .relationships {
            margin-top: 15px;
        }

        .relationships h4 {
            margin-bottom: 10px;
            color: #4a90e2;
        }

        .relationship-list {
            list-style: none;
        }

        .relationship-list li {
            padding: 5px 0;
            opacity: 0.8;
        }

        .relationship-list li:before {
            content: "→ ";
            color: #4a90e2;
            font-weight: bold;
        }

        .flow-diagram {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            margin-top: 40px;
            text-align: center;
        }

        .flow-diagram h2 {
            margin-bottom: 30px;
            color: #4a90e2;
        }

        .flow-steps {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .flow-step {
            flex: 1;
            min-width: 200px;
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            position: relative;
        }

        .flow-step:not(:last-child):after {
            content: "→";
            position: absolute;
            right: -30px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 24px;
            color: #4a90e2;
            font-weight: bold;
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }

        /* Architecture Diagram Styles */
        .architecture-section {
            margin-top: 60px;
            padding: 40px 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }

        .section-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .section-header h2 {
            font-size: 2.2em;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .section-header p {
            font-size: 1.1em;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }

        .architecture-diagram {
            margin-bottom: 40px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
            padding: 20px;
            overflow-x: auto;
        }

        .architecture-svg {
            width: 100%;
            height: auto;
            min-height: 600px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 10px;
        }

        .relationships-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .relationship-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .relationship-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .relationship-card h3 {
            font-size: 1.3em;
            margin-bottom: 15px;
            color: #4a90e2;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .relationship-details {
            list-style: none;
            padding: 0;
        }

        .relationship-details li {
            margin-bottom: 12px;
            padding-left: 20px;
            position: relative;
            line-height: 1.5;
            font-size: 0.95em;
        }

        .relationship-details li:before {
            content: "→";
            position: absolute;
            left: 0;
            color: #4a90e2;
            font-weight: bold;
            font-size: 1.2em;
        }

        .relationship-details strong {
            color: #ffffff;
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .flow-steps {
                flex-direction: column;
            }

            .flow-step:not(:last-child):after {
                content: "↓";
                right: 50%;
                top: 100%;
                transform: translateX(50%);
            }

            .components-grid {
                grid-template-columns: 1fr;
            }

            .architecture-section {
                margin-top: 40px;
                padding: 20px 10px;
            }

            .section-header h2 {
                font-size: 1.8em;
            }

            .relationships-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .relationship-card {
                padding: 20px;
            }

        .architecture-svg {
            min-height: 400px;
        }
    }

    /* Tooltip Styles */
    .tooltip {
        position: absolute;
        background: rgba(0, 0, 0, 0.9);
        color: white;
        padding: 15px;
        border-radius: 8px;
        font-size: 14px;
        max-width: 350px;
        z-index: 1000;
        pointer-events: none;
        opacity: 0;
        transition: opacity 0.3s ease;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .tooltip.show {
        opacity: 1;
    }

    .tooltip h3 {
        margin: 0 0 8px 0;
        color: #4a90e2;
        font-size: 16px;
        font-weight: bold;
    }

    .tooltip .tooltip-category {
        color: #50c878;
        font-size: 12px;
        font-weight: bold;
        margin-bottom: 8px;
        text-transform: uppercase;
    }

    .tooltip .tooltip-description {
        margin-bottom: 10px;
        line-height: 1.4;
    }

    .tooltip .tooltip-features {
        margin-bottom: 8px;
    }

    .tooltip .tooltip-features strong {
        color: #ffd93d;
    }

    .tooltip .tooltip-usage {
        font-style: italic;
        color: #cccccc;
        font-size: 13px;
    }

    /* Component hover effects */
    .component-box {
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .component-box:hover {
        filter: brightness(1.2);
        stroke-width: 2;
    }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🚀 HPC-X Components & Relationships</h1>
            <p>Interactive guide to understanding HPC QuantSim's architecture and component interactions</p>
        </div>

        <div class="components-grid">
            <!-- OpenMPI -->
            <div class="component-card" data-component="openmpi">
                <div class="status-badge status-complete">✅ Complete</div>
                <div class="component-header">
                    <div class="component-icon">🔗</div>
                    <div class="component-title">OpenMPI</div>
                </div>
                <div class="component-description">
                    Message Passing Interface for distributed parallel computing across multiple nodes.
                </div>
                <div class="component-details">
                    <p><strong>Purpose:</strong> Enables distributed execution of simulations across multiple compute nodes in a cluster.</p>
                    <p><strong>Implementation:</strong> MPI collectives for data aggregation, process coordination, and result gathering.</p>
                    <div class="relationships">
                        <h4>Interacts with:</h4>
                        <ul class="relationship-list">
                            <li>UCX for high-performance transport</li>
                            <li>HCOLL for optimized collective operations</li>
                            <li>UCC for unified collective communication</li>
                            <li>Simulation Engine for distributed execution</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- UCX -->
            <div class="component-card" data-component="ucx">
                <div class="status-badge status-partial">🔶 Partial</div>
                <div class="component-header">
                    <div class="component-icon">⚡</div>
                    <div class="component-title">UCX</div>
                </div>
                <div class="component-description">
                    Unified Communication X - High-performance transport layer for low-latency communication.
                </div>
                <div class="component-details">
                    <p><strong>Purpose:</strong> Provides optimized transport protocols (InfiniBand, Ethernet) for minimal communication overhead.</p>
                    <p><strong>Implementation:</strong> Transport layer integration for MPI communications and GPU-to-GPU transfers.</p>
                    <div class="relationships">
                        <h4>Interacts with:</h4>
                        <ul class="relationship-list">
                            <li>OpenMPI as transport backend</li>
                            <li>NCCL for GPU communications</li>
                            <li>GPUDirect for direct GPU memory access</li>
                            <li>Network hardware (InfiniBand/Ethernet)</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- NCCL -->
            <div class="component-card" data-component="nccl">
                <div class="status-badge status-complete">✅ Complete</div>
                <div class="component-header">
                    <div class="component-icon">🎮</div>
                    <div class="component-title">NCCL</div>
                </div>
                <div class="component-description">
                    NVIDIA Collective Communications Library for multi-GPU communication and synchronization.
                </div>
                <div class="component-details">
                    <p><strong>Purpose:</strong> Enables efficient GPU-to-GPU communication for parallel strategy execution across multiple GPUs.</p>
                    <p><strong>Implementation:</strong> All-reduce operations for metric aggregation, broadcast for parameter distribution.</p>
                    <div class="relationships">
                        <h4>Interacts with:</h4>
                        <ul class="relationship-list">
                            <li>CUDA kernels for GPU computation</li>
                            <li>GPUDirect for memory optimization</li>
                            <li>UCX for transport layer</li>
                            <li>GPU Memory Pool for resource management</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- CUDA -->
            <div class="component-card" data-component="cuda">
                <div class="status-badge status-complete">✅ Complete</div>
                <div class="component-header">
                    <div class="component-icon">🔥</div>
                    <div class="component-title">CUDA</div>
                </div>
                <div class="component-description">
                    Parallel computing platform for GPU-accelerated strategy execution and technical analysis.
                </div>
                <div class="component-details">
                    <p><strong>Purpose:</strong> Accelerates computationally intensive trading strategy calculations using GPU parallel processing.</p>
                    <p><strong>Implementation:</strong> Custom CUDA kernels for moving averages, RSI, Bollinger Bands, and portfolio calculations.</p>
                    <div class="relationships">
                        <h4>Interacts with:</h4>
                        <ul class="relationship-list">
                            <li>NCCL for multi-GPU coordination</li>
                            <li>GPUDirect for memory transfers</li>
                            <li>Strategy Engine for parallel execution</li>
                            <li>Memory Pool for GPU resource management</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- GPUDirect -->
            <div class="component-card" data-component="gpudirect">
                <div class="status-badge status-partial">🔶 Partial</div>
                <div class="component-header">
                    <div class="component-icon">💾</div>
                    <div class="component-title">GPUDirect</div>
                </div>
                <div class="component-description">
                    Direct memory access technology for efficient GPU-to-GPU and GPU-to-network transfers.
                </div>
                <div class="component-details">
                    <p><strong>Purpose:</strong> Eliminates CPU bottlenecks by enabling direct memory transfers between GPUs and network adapters.</p>
                    <p><strong>Implementation:</strong> Memory transfer optimization for large datasets and real-time market data streaming.</p>
                    <div class="relationships">
                        <h4>Interacts with:</h4>
                        <ul class="relationship-list">
                            <li>CUDA for GPU memory management</li>
                            <li>NCCL for collective operations</li>
                            <li>UCX for network transfers</li>
                            <li>Market Data Loader for streaming</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Sharp -->
            <div class="component-card" data-component="sharp">
                <div class="status-badge status-partial">🔶 Partial</div>
                <div class="component-header">
                    <div class="component-icon">🌐</div>
                    <div class="component-title">Sharp</div>
                </div>
                <div class="component-description">
                    Scalable Hierarchical Aggregation and Reduction Protocol for network-accelerated collective operations.
                </div>
                <div class="component-details">
                    <p><strong>Purpose:</strong> Offloads collective communication operations to network switches for improved performance.</p>
                    <p><strong>Implementation:</strong> Network acceleration for metric aggregation and result collection across cluster nodes.</p>
                    <div class="relationships">
                        <h4>Interacts with:</h4>
                        <ul class="relationship-list">
                            <li>HCOLL for collective operations</li>
                            <li>UCX for transport integration</li>
                            <li>InfiniBand network infrastructure</li>
                            <li>Metric Aggregator for performance data</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- HCOLL -->
            <div class="component-card" data-component="hcoll">
                <div class="status-badge status-complete">✅ Complete</div>
                <div class="component-header">
                    <div class="component-icon">🔄</div>
                    <div class="component-title">HCOLL</div>
                </div>
                <div class="component-description">
                    Hierarchical Collectives Library for optimized MPI collective operations.
                </div>
                <div class="component-details">
                    <p><strong>Purpose:</strong> Provides highly optimized algorithms for MPI collective operations like AllReduce and Broadcast.</p>
                    <p><strong>Implementation:</strong> Custom reduction operations for financial metrics aggregation across distributed simulations.</p>
                    <div class="relationships">
                        <h4>Interacts with:</h4>
                        <ul class="relationship-list">
                            <li>OpenMPI for collective operations</li>
                            <li>Sharp for network acceleration</li>
                            <li>UCC for unified interface</li>
                            <li>Simulation Engine for result aggregation</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- UCC -->
            <div class="component-card" data-component="ucc">
                <div class="status-badge status-complete">✅ Complete</div>
                <div class="component-header">
                    <div class="component-icon">🎯</div>
                    <div class="component-title">UCC</div>
                </div>
                <div class="component-description">
                    Unified Collective Communications library providing a single API for various collective implementations.
                </div>
                <div class="component-details">
                    <p><strong>Purpose:</strong> Unifies different collective communication libraries under a single interface for optimal performance.</p>
                    <p><strong>Implementation:</strong> Unified collectives for metric aggregation, parameter broadcasting, and result gathering.</p>
                    <div class="relationships">
                        <h4>Interacts with:</h4>
                        <ul class="relationship-list">
                            <li>HCOLL for optimized collectives</li>
                            <li>OpenMPI for MPI operations</li>
                            <li>NCCL for GPU collectives</li>
                            <li>Performance Metrics system</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- ClusterKit -->
            <div class="component-card" data-component="clusterkit">
                <div class="status-badge status-complete">✅ Complete</div>
                <div class="component-header">
                    <div class="component-icon">🏗️</div>
                    <div class="component-title">ClusterKit</div>
                </div>
                <div class="component-description">
                    Deployment and orchestration toolkit for managing HPC cluster resources and job scheduling.
                </div>
                <div class="component-details">
                    <p><strong>Purpose:</strong> Automates deployment, configuration, and management of HPC QuantSim across cluster environments.</p>
                    <p><strong>Implementation:</strong> SLURM/PBS integration, resource allocation, job submission, and monitoring capabilities.</p>
                    <div class="relationships">
                        <h4>Interacts with:</h4>
                        <ul class="relationship-list">
                            <li>SLURM/PBS schedulers</li>
                            <li>Cluster Manager for resource allocation</li>
                            <li>CLI for job submission</li>
                            <li>All HPC-X components for orchestration</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="flow-diagram">
            <h2>🔄 HPC QuantSim Application Flow</h2>
            <div class="flow-steps">
                <div class="flow-step">
                    <h3>1. Data Ingestion</h3>
                    <p>Market data loaded via GPUDirect-optimized loaders</p>
                </div>
                <div class="flow-step">
                    <h3>2. Strategy Distribution</h3>
                    <p>OpenMPI + UCC broadcast strategies across nodes</p>
                </div>
                <div class="flow-step">
                    <h3>3. Parallel Execution</h3>
                    <p>CUDA kernels execute strategies on GPUs with NCCL coordination</p>
                </div>
                <div class="flow-step">
                    <h3>4. Result Aggregation</h3>
                    <p>HCOLL + Sharp accelerated collective operations</p>
                </div>
                <div class="flow-step">
                    <h3>5. Analysis & Visualization</h3>
                    <p>Real-time dashboard with WebSocket streaming</p>
                </div>
            </div>
        </div>

        <div class="legend">
            <div class="legend-item">
                <div class="legend-color status-complete"></div>
                <span>Fully Implemented</span>
            </div>
            <div class="legend-item">
                <div class="legend-color status-partial"></div>
                <span>Partially Implemented</span>
            </div>
        </div>

        <!-- Architecture Diagram Section -->
        <div class="architecture-section">
            <div class="section-header">
                <h2>🏗️ HPC-X Architecture & Component Relationships</h2>
                <p>Layered architecture showing how components interact and data flows through the system</p>
                <p><em>Hover over any component to see detailed information</em></p>
            </div>
            
            <!-- Tooltip for hover information -->
            <div id="tooltip" class="tooltip"></div>

            <div class="architecture-diagram">
                <svg viewBox="0 0 1000 760" class="architecture-svg">
                    <!-- Background layers -->
                    <defs>
                        <linearGradient id="layerGradient1" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" style="stop-color:#4a90e2;stop-opacity:0.1" />
                            <stop offset="100%" style="stop-color:#4a90e2;stop-opacity:0.3" />
                        </linearGradient>
                        <linearGradient id="layerGradient2" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" style="stop-color:#50c878;stop-opacity:0.1" />
                            <stop offset="100%" style="stop-color:#50c878;stop-opacity:0.3" />
                        </linearGradient>
                        <linearGradient id="layerGradient3" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" style="stop-color:#ff6b6b;stop-opacity:0.1" />
                            <stop offset="100%" style="stop-color:#ff6b6b;stop-opacity:0.3" />
                        </linearGradient>
                        <linearGradient id="layerGradient4" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" style="stop-color:#ffd93d;stop-opacity:0.1" />
                            <stop offset="100%" style="stop-color:#ffd93d;stop-opacity:0.3" />
                        </linearGradient>
                        <linearGradient id="layerGradient5" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" style="stop-color:#9b59b6;stop-opacity:0.1" />
                            <stop offset="100%" style="stop-color:#9b59b6;stop-opacity:0.3" />
                        </linearGradient>
                    </defs>

                    <!-- Layer 1: Application Layer -->
                    <rect x="50" y="50" width="900" height="120" fill="url(#layerGradient1)" stroke="#4a90e2" stroke-width="2" rx="10"/>
                    <text x="500" y="85" text-anchor="middle" fill="#ffffff" font-size="18" font-weight="bold">Application Layer</text>
                    
                    <!-- OpenMPI Box -->
                    <g class="component-box" data-component="openmpi">
                        <rect x="80" y="100" width="140" height="50" fill="#4a90e2" stroke="#ffffff" stroke-width="1" rx="5"/>
                        <text x="150" y="120" text-anchor="middle" fill="#ffffff" font-size="13" font-weight="bold">OpenMPI</text>
                        <text x="150" y="135" text-anchor="middle" fill="#ffffff" font-size="9">MPI Implementation</text>
                    </g>

                    <!-- OpenSHMEM Box -->
                    <g class="component-box" data-component="openshmem">
                        <rect x="240" y="100" width="140" height="50" fill="#4a90e2" stroke="#ffffff" stroke-width="1" rx="5"/>
                        <text x="310" y="120" text-anchor="middle" fill="#ffffff" font-size="13" font-weight="bold">OpenSHMEM</text>
                        <text x="310" y="135" text-anchor="middle" fill="#ffffff" font-size="9">PGAS Interface</text>
                    </g>

                    <!-- HPC QuantSim Box -->
                    <g class="component-box" data-component="hpcquantsim">
                        <rect x="400" y="100" width="140" height="50" fill="#4a90e2" stroke="#ffffff" stroke-width="1" rx="5"/>
                        <text x="470" y="120" text-anchor="middle" fill="#ffffff" font-size="13" font-weight="bold">HPC QuantSim</text>
                        <text x="470" y="135" text-anchor="middle" fill="#ffffff" font-size="9">Trading Apps</text>
                    </g>

                    <!-- PMIx Box -->
                    <g class="component-box" data-component="pmix">
                        <rect x="560" y="100" width="140" height="50" fill="#4a90e2" stroke="#ffffff" stroke-width="1" rx="5"/>
                        <text x="630" y="120" text-anchor="middle" fill="#ffffff" font-size="13" font-weight="bold">PMIx</text>
                        <text x="630" y="135" text-anchor="middle" fill="#ffffff" font-size="9">Process Management</text>
                    </g>

                    <!-- ClusterKit Box -->
                    <g class="component-box" data-component="clusterkit">
                        <rect x="720" y="100" width="140" height="50" fill="#4a90e2" stroke="#ffffff" stroke-width="1" rx="5"/>
                        <text x="790" y="120" text-anchor="middle" fill="#ffffff" font-size="13" font-weight="bold">ClusterKit</text>
                        <text x="790" y="135" text-anchor="middle" fill="#ffffff" font-size="9">Cluster Tools</text>
                    </g>

                    <!-- Layer 2: Communication Libraries -->
                    <rect x="50" y="200" width="900" height="100" fill="url(#layerGradient2)" stroke="#50c878" stroke-width="2" rx="10"/>
                    <text x="500" y="235" text-anchor="middle" fill="#ffffff" font-size="18" font-weight="bold">Communication Libraries Layer</text>
                    
                    <!-- NCCL Box -->
                    <g class="component-box" data-component="nccl">
                        <rect x="200" y="250" width="200" height="40" fill="#50c878" stroke="#ffffff" stroke-width="1" rx="5"/>
                        <text x="300" y="265" text-anchor="middle" fill="#ffffff" font-size="14" font-weight="bold">NCCL</text>
                        <text x="300" y="280" text-anchor="middle" fill="#ffffff" font-size="10">GPU-to-GPU Communication</text>
                    </g>

                    <!-- XCCL Box -->
                    <g class="component-box" data-component="xccl">
                        <rect x="450" y="250" width="200" height="40" fill="#50c878" stroke="#ffffff" stroke-width="1" rx="5"/>
                        <text x="550" y="265" text-anchor="middle" fill="#ffffff" font-size="14" font-weight="bold">XCCL</text>
                        <text x="550" y="280" text-anchor="middle" fill="#ffffff" font-size="10">Extended Collectives</text>
                    </g>

                    <!-- Layer 3: Collective Operations -->
                    <rect x="50" y="330" width="900" height="120" fill="url(#layerGradient3)" stroke="#ff6b6b" stroke-width="2" rx="10"/>
                    <text x="500" y="365" text-anchor="middle" fill="#ffffff" font-size="18" font-weight="bold">Collective Operations Layer</text>
                    
                    <!-- HCOLL Box -->
                    <g class="component-box" data-component="hcoll">
                        <rect x="80" y="380" width="140" height="50" fill="#ff6b6b" stroke="#ffffff" stroke-width="1" rx="5"/>
                        <text x="150" y="400" text-anchor="middle" fill="#ffffff" font-size="13" font-weight="bold">HCOLL</text>
                        <text x="150" y="415" text-anchor="middle" fill="#ffffff" font-size="9">Hierarchical Colls</text>
                    </g>

                    <!-- UCC Box -->
                    <g class="component-box" data-component="ucc">
                        <rect x="240" y="380" width="140" height="50" fill="#ff6b6b" stroke="#ffffff" stroke-width="1" rx="5"/>
                        <text x="310" y="400" text-anchor="middle" fill="#ffffff" font-size="13" font-weight="bold">UCC</text>
                        <text x="310" y="415" text-anchor="middle" fill="#ffffff" font-size="9">Unified Collectives</text>
                    </g>

                    <!-- Sharp Box -->
                    <g class="component-box" data-component="sharp">
                        <rect x="400" y="380" width="140" height="50" fill="#ff6b6b" stroke="#ffffff" stroke-width="1" rx="5"/>
                        <text x="470" y="400" text-anchor="middle" fill="#ffffff" font-size="13" font-weight="bold">Sharp</text>
                        <text x="470" y="415" text-anchor="middle" fill="#ffffff" font-size="9">Network Accel</text>
                    </g>

                    <!-- FCA Box -->
                    <g class="component-box" data-component="fca">
                        <rect x="560" y="380" width="140" height="50" fill="#ff6b6b" stroke="#ffffff" stroke-width="1" rx="5"/>
                        <text x="630" y="400" text-anchor="middle" fill="#ffffff" font-size="13" font-weight="bold">FCA</text>
                        <text x="630" y="415" text-anchor="middle" fill="#ffffff" font-size="9">Fabric Colls</text>
                    </g>

                    <!-- CUDA Box -->
                    <g class="component-box" data-component="cuda">
                        <rect x="720" y="380" width="140" height="50" fill="#ff6b6b" stroke="#ffffff" stroke-width="1" rx="5"/>
                        <text x="790" y="400" text-anchor="middle" fill="#ffffff" font-size="13" font-weight="bold">CUDA</text>
                        <text x="790" y="415" text-anchor="middle" fill="#ffffff" font-size="9">GPU Kernels</text>
                    </g>

                    <!-- Layer 4: Transport Layer -->
                    <rect x="50" y="480" width="900" height="120" fill="url(#layerGradient4)" stroke="#ffd93d" stroke-width="2" rx="10"/>
                    <text x="500" y="515" text-anchor="middle" fill="#ffffff" font-size="18" font-weight="bold">Transport & Communication Layer</text>
                    
                    <!-- UCX Box -->
                    <g class="component-box" data-component="ucx">
                        <rect x="120" y="530" width="140" height="50" fill="#ffd93d" stroke="#ffffff" stroke-width="1" rx="5"/>
                        <text x="190" y="550" text-anchor="middle" fill="#000000" font-size="13" font-weight="bold">UCX</text>
                        <text x="190" y="565" text-anchor="middle" fill="#000000" font-size="9">Unified Comm</text>
                    </g>

                    <!-- GPUDirect Box -->
                    <g class="component-box" data-component="gpudirect">
                        <rect x="280" y="530" width="140" height="50" fill="#ffd93d" stroke="#ffffff" stroke-width="1" rx="5"/>
                        <text x="350" y="550" text-anchor="middle" fill="#000000" font-size="13" font-weight="bold">GPUDirect</text>
                        <text x="350" y="565" text-anchor="middle" fill="#000000" font-size="9">GPU Memory</text>
                    </g>

                    <!-- XPMEM Box -->
                    <g class="component-box" data-component="xpmem">
                        <rect x="440" y="530" width="140" height="50" fill="#ffd93d" stroke="#ffffff" stroke-width="1" rx="5"/>
                        <text x="510" y="550" text-anchor="middle" fill="#000000" font-size="13" font-weight="bold">XPMEM</text>
                        <text x="510" y="565" text-anchor="middle" fill="#000000" font-size="9">Cross Memory</text>
                    </g>

                    <!-- KNEM Box -->
                    <g class="component-box" data-component="knem">
                        <rect x="600" y="530" width="140" height="50" fill="#ffd93d" stroke="#ffffff" stroke-width="1" rx="5"/>
                        <text x="670" y="550" text-anchor="middle" fill="#000000" font-size="13" font-weight="bold">KNEM</text>
                        <text x="670" y="565" text-anchor="middle" fill="#000000" font-size="9">Kernel Assist</text>
                    </g>

                    <!-- Layer 5: Hardware Layer -->
                    <rect x="50" y="630" width="900" height="100" fill="url(#layerGradient5)" stroke="#9b59b6" stroke-width="2" rx="10"/>
                    <text x="500" y="665" text-anchor="middle" fill="#ffffff" font-size="18" font-weight="bold">Hardware Layer</text>
                    <text x="500" y="690" text-anchor="middle" fill="#ffffff" font-size="14">InfiniBand • Ethernet • NVIDIA GPUs • CPUs</text>
                    <text x="500" y="710" text-anchor="middle" fill="#ffffff" font-size="12" opacity="0.8">Physical network and compute hardware</text>

                    <!-- Relationship Arrows -->
                    <!-- OpenMPI to HCOLL -->
                    <path d="M 150 150 Q 150 270 150 380" stroke="#4a90e2" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                    <text x="160" y="270" fill="#4a90e2" font-size="11" font-weight="bold">uses</text>

                    <!-- OpenSHMEM to UCX -->
                    <path d="M 310 150 Q 250 340 190 530" stroke="#4a90e2" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                    <text x="250" y="340" fill="#4a90e2" font-size="11" font-weight="bold">uses</text>

                    <!-- NCCL to UCX -->
                    <path d="M 300 290 Q 245 410 190 530" stroke="#50c878" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                    <text x="235" y="410" fill="#50c878" font-size="11" font-weight="bold">uses</text>

                    <!-- HCOLL to UCX -->
                    <path d="M 150 430 Q 170 480 190 530" stroke="#ff6b6b" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                    <text x="160" y="480" fill="#ff6b6b" font-size="11" font-weight="bold">implemented on</text>

                    <!-- UCC to UCX -->
                    <path d="M 310 430 Q 250 480 190 530" stroke="#ff6b6b" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                    <text x="240" y="480" fill="#ff6b6b" font-size="11" font-weight="bold">uses</text>

                    <!-- NCCL to CUDA -->
                    <path d="M 400 290 Q 590 340 790 380" stroke="#50c878" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                    <text x="590" y="340" fill="#50c878" font-size="11" font-weight="bold">uses</text>

                    <!-- CUDA to GPUDirect -->
                    <path d="M 790 430 Q 570 480 350 530" stroke="#ff6b6b" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                    <text x="570" y="480" fill="#ff6b6b" font-size="11" font-weight="bold">uses</text>

                    <!-- Sharp accelerates UCC -->
                    <path d="M 470 380 Q 390 370 310 380" stroke="#ff6b6b" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                    <text x="380" y="370" fill="#ff6b6b" font-size="11" font-weight="bold">accelerates</text>

                    <!-- FCA to UCX -->
                    <path d="M 630 430 Q 410 480 190 530" stroke="#ff6b6b" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                    <text x="410" y="480" fill="#ff6b6b" font-size="11" font-weight="bold">uses</text>

                    <!-- XCCL to UCC -->
                    <path d="M 550 290 Q 430 340 310 380" stroke="#50c878" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
                    <text x="430" y="340" fill="#50c878" font-size="11" font-weight="bold">extends</text>

                    <!-- Arrow marker definition -->
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#ffffff" />
                        </marker>
                    </defs>

                    <!-- Data Flow Indicators -->
                    <text x="50" y="30" fill="#ffffff" font-size="16" font-weight="bold">📊 Data Flow Direction</text>
                    <path d="M 200 30 L 250 30" stroke="#4a90e2" stroke-width="3" marker-end="url(#arrowhead)"/>
                    <text x="260" y="35" fill="#ffffff" font-size="12">Top-down execution flow</text>
                </svg>
            </div>

            <!-- Relationship Explanations -->
            <div class="relationships-grid">
                <div class="relationship-card">
                    <h3>🔗 Key Relationships</h3>
                    <ul class="relationship-details">
                        <li><strong>HCOLL is implemented on top of UCX</strong> - HCOLL leverages UCX's unified communication framework for efficient collective operations</li>
                        <li><strong>NCCL uses UCX for transport</strong> - NCCL utilizes UCX for multi-node GPU communication over InfiniBand and other networks</li>
                        <li><strong>OpenMPI integrates with HCOLL</strong> - OpenMPI uses HCOLL for optimized collective communication operations</li>
                        <li><strong>Sharp accelerates UCC operations</strong> - Sharp offloads collective operations to network hardware, working with UCC</li>
                        <li><strong>FCA provides fabric collectives</strong> - FCA implements collective operations directly in the network fabric</li>
                        <li><strong>XCCL extends UCC</strong> - XCCL provides extended collective communication capabilities built on UCC</li>
                    </ul>
                </div>

                <div class="relationship-card">
                    <h3>📈 Data Flow Patterns</h3>
                    <ul class="relationship-details">
                        <li><strong>Application → Collectives</strong> - OpenMPI and OpenSHMEM use HCOLL, UCC, and FCA for collective operations</li>
                        <li><strong>Communication → Transport</strong> - NCCL and XCCL operations are executed via UCX transport layer</li>
                        <li><strong>Collectives → Transport</strong> - HCOLL, UCC, Sharp, and FCA all utilize UCX for data movement</li>
                        <li><strong>Transport → Memory</strong> - UCX uses XPMEM and KNEM for efficient intra-node memory operations</li>
                        <li><strong>GPU Path: NCCL → CUDA → GPUDirect → Hardware</strong> - Direct GPU-to-GPU communication path</li>
                        <li><strong>PGAS Path: OpenSHMEM → UCX → Hardware</strong> - Partitioned Global Address Space communication</li>
                    </ul>
                </div>

                <div class="relationship-card">
                    <h3>⚡ Performance Benefits</h3>
                    <ul class="relationship-details">
                        <li><strong>Layered Architecture</strong> - Each layer optimizes specific aspects of communication and computation</li>
                        <li><strong>Hardware Acceleration</strong> - Sharp, FCA, and GPUDirect offload operations to network and GPU hardware</li>
                        <li><strong>Unified Interface</strong> - UCX provides consistent API across InfiniBand, Ethernet, and shared memory</li>
                        <li><strong>Multiple Collective Libraries</strong> - HCOLL, UCC, FCA, and XCCL provide optimized collective operations</li>
                        <li><strong>Memory Optimization</strong> - XPMEM and KNEM enable efficient intra-node memory operations</li>
                        <li><strong>Process Management</strong> - PMIx provides scalable process management and coordination</li>
                        <li><strong>PGAS Support</strong> - OpenSHMEM enables efficient partitioned global address space programming</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Component tooltip data
        const componentData = {
            'openmpi': {
                category: 'Application Layer',
                title: 'OpenMPI',
                description: 'Open-source Message Passing Interface implementation for distributed parallel computing across multiple nodes and processes.',
                features: 'Point-to-point communication, collective operations, process management, fault tolerance, and dynamic process spawning.',
                usage: 'Used for distributing HPC QuantSim simulations across multiple compute nodes in a cluster environment.'
            },
            'openshmem': {
                category: 'Application Layer',
                title: 'OpenSHMEM',
                description: 'Partitioned Global Address Space (PGAS) programming interface that provides low-latency, high-bandwidth communication.',
                features: 'One-sided communication, atomic operations, collective routines, and symmetric memory allocation.',
                usage: 'Enables efficient data sharing and synchronization between processes in distributed trading simulations.'
            },
            'hpcquantsim': {
                category: 'Application Layer',
                title: 'HPC QuantSim',
                description: 'High-Performance Computing Quantitative Simulation platform for large-scale financial market modeling and trading strategy backtesting.',
                features: 'Multi-strategy execution, real-time market replay, GPU acceleration, distributed computing, and comprehensive analytics.',
                usage: 'Core application that orchestrates all HPC-X components to deliver high-performance quantitative trading simulations.'
            },
            'pmix': {
                category: 'Application Layer',
                title: 'PMIx (Process Management Interface)',
                description: 'Scalable process management interface that provides services for application lifecycle management in HPC environments.',
                features: 'Process spawning, job control, resource allocation, fault notification, and runtime coordination.',
                usage: 'Manages the lifecycle of distributed simulation processes and coordinates resource allocation across the cluster.'
            },
            'clusterkit': {
                category: 'Application Layer',
                title: 'ClusterKit',
                description: 'Comprehensive cluster management and monitoring toolkit for HPC environments, providing system administration capabilities.',
                features: 'Node monitoring, resource management, job scheduling integration, health checking, and performance monitoring.',
                usage: 'Provides cluster-wide monitoring and management capabilities for the HPC QuantSim deployment infrastructure.'
            },
            'nccl': {
                category: 'Communication Libraries',
                title: 'NCCL (NVIDIA Collective Communications Library)',
                description: 'Optimized library for multi-GPU and multi-node communication, providing high-performance collective operations.',
                features: 'All-reduce, broadcast, reduce-scatter, all-gather operations optimized for NVIDIA GPUs and high-speed interconnects.',
                usage: 'Enables efficient GPU-to-GPU communication for parallel strategy execution and gradient synchronization in ML models.'
            },
            'xccl': {
                category: 'Communication Libraries',
                title: 'XCCL (Extended Collective Communications Library)',
                description: 'Extended collective communication library that provides advanced collective operations beyond standard MPI collectives.',
                features: 'Hierarchical collectives, topology-aware algorithms, adaptive collective selection, and custom reduction operations.',
                usage: 'Provides specialized collective operations for complex data aggregation patterns in distributed financial simulations.'
            },
            'hcoll': {
                category: 'Collective Operations',
                title: 'HCOLL (Hierarchical Collectives)',
                description: 'Hierarchical collective communication library that optimizes collective operations using network topology awareness.',
                features: 'Topology-aware collectives, hierarchical algorithms, bandwidth optimization, and latency reduction techniques.',
                usage: 'Optimizes collective operations like all-reduce for aggregating simulation results across multiple compute nodes.'
            },
            'ucc': {
                category: 'Collective Operations',
                title: 'UCC (Unified Collective Communications)',
                description: 'Unified framework for collective communication operations that provides a common API for various collective libraries.',
                features: 'Unified API, multiple backend support, runtime collective selection, and performance optimization.',
                usage: 'Provides a unified interface for collective operations, automatically selecting the best implementation for each use case.'
            },
            'sharp': {
                category: 'Collective Operations',
                title: 'Sharp (Scalable Hierarchical Aggregation and Reduction Protocol)',
                description: 'Network-based collective acceleration that offloads collective operations to the network infrastructure.',
                features: 'In-network computing, hardware acceleration, bandwidth aggregation, and latency reduction for collectives.',
                usage: 'Accelerates collective operations by performing computations directly in the network switches, reducing CPU overhead.'
            },
            'fca': {
                category: 'Collective Operations',
                title: 'FCA (Fabric Collective Acceleration)',
                description: 'Fabric-based collective acceleration that leverages InfiniBand network capabilities for optimized collective operations.',
                features: 'InfiniBand offload, hardware multicast, adaptive routing, and congestion control for collective traffic.',
                usage: 'Provides hardware-accelerated collective operations specifically optimized for InfiniBand fabric infrastructure.'
            },
            'cuda': {
                category: 'Collective Operations',
                title: 'CUDA (Compute Unified Device Architecture)',
                description: 'Parallel computing platform and programming model for NVIDIA GPUs, enabling massive parallel processing capabilities.',
                features: 'Parallel kernel execution, memory management, stream processing, cooperative groups, and unified memory.',
                usage: 'Accelerates computationally intensive trading calculations like technical indicators, risk metrics, and portfolio optimization.'
            },
            'ucx': {
                category: 'Transport & Communication',
                title: 'UCX (Unified Communication X)',
                description: 'High-performance communication framework that provides optimized transport protocols for various network technologies.',
                features: 'Multi-transport support, zero-copy operations, RDMA capabilities, and adaptive protocol selection.',
                usage: 'Provides the underlying transport layer for all inter-node communication, optimizing for minimal latency and maximum bandwidth.'
            },
            'gpudirect': {
                category: 'Transport & Communication',
                title: 'GPUDirect',
                description: 'Technology that enables direct memory access between GPUs and other devices, bypassing CPU involvement for improved performance.',
                features: 'Peer-to-peer GPU communication, RDMA from network to GPU memory, and direct storage access.',
                usage: 'Eliminates CPU bottlenecks in GPU-to-GPU data transfers and enables direct network-to-GPU data streaming for market data.'
            },
            'xpmem': {
                category: 'Transport & Communication',
                title: 'XPMEM (Cross Memory Attach)',
                description: 'Linux kernel module that allows processes to map and access memory segments from other processes efficiently.',
                features: 'Cross-process memory mapping, zero-copy data sharing, and high-bandwidth intra-node communication.',
                usage: 'Enables efficient data sharing between processes on the same node, reducing memory copies in distributed simulations.'
            },
            'knem': {
                category: 'Transport & Communication',
                title: 'KNEM (Kernel-Assisted Memory)',
                description: 'Linux kernel module that provides high-performance intra-node communication through kernel-assisted memory operations.',
                features: 'Kernel-level memory operations, DMA transfers, and optimized large message handling.',
                usage: 'Optimizes large data transfers between processes on the same node, particularly for shared market data and results.'
            }
        };

        // Tooltip functionality
        let tooltip = null;

        document.addEventListener('DOMContentLoaded', function() {
            tooltip = document.getElementById('tooltip');
            
            // Add hover listeners to SVG component boxes
            const componentBoxes = document.querySelectorAll('.component-box');
            componentBoxes.forEach(box => {
                box.addEventListener('mouseenter', showTooltip);
                box.addEventListener('mouseleave', hideTooltip);
                box.addEventListener('mousemove', moveTooltip);
            });

            // Interactive functionality for component cards
            const componentCards = document.querySelectorAll('.component-card');
            
            componentCards.forEach(card => {
                card.addEventListener('click', function() {
                    const details = this.querySelector('.component-details');
                    const isActive = this.classList.contains('active');
                    
                    // Close all other cards
                    componentCards.forEach(otherCard => {
                        otherCard.classList.remove('active');
                        otherCard.querySelector('.component-details').classList.remove('show');
                    });
                    
                    // Toggle current card
                    if (!isActive) {
                        this.classList.add('active');
                        details.classList.add('show');
                    }
                });
            });

            // Highlight related components on hover
            componentCards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    const component = this.dataset.component;
                    highlightRelatedComponents(component);
                });
                
                card.addEventListener('mouseleave', function() {
                    clearHighlights();
                });
            });
        });

        function showTooltip(event) {
            const component = event.currentTarget.dataset.component;
            const data = componentData[component];
            
            if (data && tooltip) {
                tooltip.innerHTML = `
                    <div class="tooltip-category">${data.category}</div>
                    <h3>${data.title}</h3>
                    <div class="tooltip-description">${data.description}</div>
                    <div class="tooltip-features"><strong>Key Features:</strong> ${data.features}</div>
                    <div class="tooltip-usage">${data.usage}</div>
                `;
                
                tooltip.classList.add('show');
                moveTooltip(event);
            }
        }

        function hideTooltip() {
            if (tooltip) {
                tooltip.classList.remove('show');
            }
        }

        function moveTooltip(event) {
            if (tooltip && tooltip.classList.contains('show')) {
                const rect = event.currentTarget.getBoundingClientRect();
                const tooltipRect = tooltip.getBoundingClientRect();
                
                let left = event.clientX + 15;
                let top = event.clientY - 15;
                
                // Adjust position if tooltip would go off screen
                if (left + tooltipRect.width > window.innerWidth) {
                    left = event.clientX - tooltipRect.width - 15;
                }
                
                if (top + tooltipRect.height > window.innerHeight) {
                    top = event.clientY - tooltipRect.height - 15;
                }
                
                tooltip.style.left = left + 'px';
                tooltip.style.top = top + 'px';
            }
        }

        function highlightRelatedComponents(component) {
            const relationships = {
                'openmpi': ['ucx', 'hcoll', 'ucc'],
                'ucx': ['openmpi', 'nccl', 'gpudirect'],
                'nccl': ['cuda', 'gpudirect', 'ucx'],
                'cuda': ['nccl', 'gpudirect'],
                'gpudirect': ['cuda', 'nccl', 'ucx'],
                'sharp': ['hcoll', 'ucx'],
                'hcoll': ['openmpi', 'sharp', 'ucc'],
                'ucc': ['hcoll', 'openmpi', 'nccl'],
                'clusterkit': ['openmpi', 'hcoll', 'ucc']
            };

            const related = relationships[component] || [];
            related.forEach(relatedComponent => {
                const relatedCard = document.querySelector(`[data-component="${relatedComponent}"]`);
                if (relatedCard) {
                    relatedCard.style.opacity = '0.7';
                    relatedCard.style.border = '2px solid #4a90e2';
                }
            });
        }

        function clearHighlights() {
            const cards = document.querySelectorAll('.component-card');
            cards.forEach(card => {
                card.style.opacity = '';
                card.style.border = '';
            });
        }
    </script>
</body>
</html>
